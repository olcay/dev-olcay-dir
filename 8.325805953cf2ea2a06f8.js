(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Z09g:function(e,t,i){"use strict";i.r(t),i.d(t,"PetModule",function(){return G});var n=i("3Pt+"),o=i("ofXK"),c=i("tyNb"),a=i("fXoL");let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Db({type:e,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(e,t){1&e&&(a.Ob(0,"div",0),a.Ob(1,"div",1),a.Kb(2,"router-outlet"),a.Nb(),a.Nb())},directives:[c.h],encapsulation:2}),e})();var s=i("nPby"),b=i("J9tS"),d=i("CEyA"),l=i("dPr5"),u=i("vYor");const m=[[["","body",""]],[["","submit",""]]],p=["[body]","[submit]"];let f=(()=>{class e{constructor(e,t){this.modalService=e,this.el=t,this.element=t.nativeElement}ngOnInit(){this.id?(document.body.appendChild(this.element),this.element.addEventListener("click",e=>{"modal jw-modal"===e.target.className&&this.close()}),this.modalService.add(this)):console.error("modal must have an id")}ngOnDestroy(){this.modalService.remove(this.id),this.element.remove()}open(){this.element.style.display="block",document.body.classList.add("jw-modal-open")}close(){this.element.style.display="none",document.body.classList.remove("jw-modal-open")}}return e.\u0275fac=function(t){return new(t||e)(a.Jb(u.a),a.Jb(a.l))},e.\u0275cmp=a.Db({type:e,selectors:[["jw-modal"]],inputs:{id:"id"},ngContentSelectors:p,decls:17,vars:0,consts:[["tabindex","-1",1,"modal","jw-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","jw-modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],[1,"jw-modal-background"]],template:function(e,t){1&e&&(a.cc(m),a.Ob(0,"div",0),a.Ob(1,"div",1),a.Ob(2,"div",2),a.Ob(3,"div",3),a.Ob(4,"h5",4),a.oc(5,"Emin misiniz?"),a.Nb(),a.Ob(6,"button",5),a.Vb("click",function(){return t.close()}),a.Ob(7,"span",6),a.oc(8,"\xd7"),a.Nb(),a.Nb(),a.Nb(),a.Ob(9,"div",7),a.Ob(10,"p"),a.bc(11),a.Nb(),a.Nb(),a.Ob(12,"div",8),a.Ob(13,"button",9),a.Vb("click",function(){return t.close()}),a.oc(14,"\u0130ptal"),a.Nb(),a.bc(15,1),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Kb(16,"div",10))},styles:["jw-modal{display:none}jw-modal .jw-modal{position:fixed;top:0;right:0;bottom:0;left:0;display:block;z-index:1000;overflow:auto}jw-modal .jw-modal .jw-modal-body{padding:20px;background:#fff;margin:40px}jw-modal .jw-modal-background{position:fixed;top:0;right:0;bottom:0;left:0;background-color:#000;opacity:.75;z-index:900}body.jw-modal-open{overflow:hidden}"],encapsulation:2}),e})();function h(e,t){if(1&e){const e=a.Pb();a.Ob(0,"div",18),a.Ob(1,"h5",8),a.oc(2,"\u0130lan"),a.Nb(),a.Ob(3,"div",9),a.Ob(4,"div",19),a.Ob(5,"input",20),a.Vb("change",function(){return a.jc(e),a.Xb().onChangeStatus()}),a.Nb(),a.Ob(6,"label",21),a.oc(7),a.Nb(),a.Nb(),a.Kb(8,"br"),a.Ob(9,"button",22),a.oc(10,"D\xfczenle"),a.Nb(),a.Ob(11,"button",23),a.Vb("click",function(){return a.jc(e),a.Xb().openModal("delete-modal")}),a.oc(12,"Sil"),a.Nb(),a.Nb(),a.Nb()}if(2&e){const e=a.Xb();a.yb(5),a.dc("checked","Published"==e.data.petStatus.value),a.yb(2),a.pc(e.data.petStatus.text),a.yb(2),a.fc("routerLink","/pet/edit/",e.data.id,"")}}function g(e,t){1&e&&(a.Ob(0,"span"),a.oc(1,"..."),a.Nb())}let v=(()=>{class e{constructor(e,t,i,n,o,c){this.accountService=e,this.client=t,this.activatedRoute=i,this.alertService=n,this.router=o,this.modalService=c,this.account=this.accountService.accountValue,this.petId=this.activatedRoute.snapshot.params.id,this.deleting=!1,this.data=[],this.tags=[]}getData(){this.client.getPet(this.petId).subscribe(e=>{this.data=e,this.data.isEditable=e.createdBy.id.toString()===this.account.id||this.account.role===s.c.Admin},e=>console.error(e))}onDelete(){this.deleting=!0,this.client.deletePet(this.petId).subscribe(()=>{this.alertService.success("Pet silindi.",{keepAfterRouteChange:!0}),this.router.navigate(["/profile"])})}ngOnInit(){this.getData()}onChangeStatus(){"Published"==this.data.petStatus.value?this.client.unpublishPet(this.petId).subscribe(()=>{this.getData()}):this.client.publishPet(this.petId).subscribe(()=>{this.getData()})}openModal(e){this.modalService.open(e)}closeModal(e){this.modalService.close(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Jb(b.a),a.Jb(d.f),a.Jb(c.a),a.Jb(b.b),a.Jb(c.c),a.Jb(l.b))},e.\u0275cmp=a.Db({type:e,selectors:[["ng-component"]],decls:41,vars:17,consts:[[1,"container"],[1,"row"],[1,"col-lg-8"],[1,"mt-4"],["src","http://placekitten.com/900/400",1,"img-fluid","rounded",3,"alt"],[1,"lead"],[1,"col-md-4"],[1,"card","border-primary","my-4"],[1,"card-header"],[1,"card-body"],["class","card my-4",4,"ngIf"],[1,"card","border-danger","my-4"],[1,"card-title"],["id","delete-modal"],["body",""],["submit",""],["type","button",1,"btn","btn-danger",3,"disabled","click"],[4,"ngIf"],[1,"card","my-4"],[1,"custom-control","custom-switch"],["type","checkbox","id","customSwitch1",1,"custom-control-input",3,"checked","change"],["for","customSwitch1",1,"custom-control-label"],[1,"btn","btn-primary","mr-2",3,"routerLink"],[1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(a.Ob(0,"section"),a.Ob(1,"div",0),a.Ob(2,"div",1),a.Ob(3,"div",2),a.Ob(4,"h1",3),a.oc(5),a.Nb(),a.Ob(6,"p"),a.oc(7),a.Yb(8,"date"),a.Nb(),a.Kb(9,"br"),a.Kb(10,"img",4),a.Kb(11,"br"),a.Kb(12,"br"),a.Ob(13,"p",5),a.oc(14),a.Nb(),a.Nb(),a.Ob(15,"div",6),a.Ob(16,"div",7),a.Ob(17,"h5",8),a.oc(18),a.Nb(),a.Ob(19,"div",9),a.Ob(20,"p"),a.oc(21),a.Nb(),a.Ob(22,"p"),a.oc(23),a.Nb(),a.Ob(24,"p"),a.oc(25),a.Nb(),a.Nb(),a.Nb(),a.nc(26,h,13,3,"div",10),a.Ob(27,"div",11),a.Ob(28,"h5",8),a.oc(29,"Uyar\u0131"),a.Nb(),a.Ob(30,"div",9),a.Ob(31,"h4",12),a.oc(32,"\xdcCRET \u0130STEN\u0130RSE G\xdcVENMEY\u0130N!"),a.Nb(),a.oc(33," Kargo/ta\u015f\u0131ma \xfccreti dahil herhangi bir sebeple \xfccret isteyen ki\u015filere g\xfcvenmeyin. "),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(34,"jw-modal",13),a.Mb(35,14),a.oc(36,"Pet kayd\u0131 silinecek. Devam etmek istedi\u011finize emin misiniz?"),a.Lb(),a.Mb(37,15),a.Ob(38,"button",16),a.Vb("click",function(){return t.onDelete()}),a.oc(39," Sil"),a.nc(40,g,2,0,"span",17),a.Nb(),a.Lb(),a.Nb()),2&e&&(a.yb(5),a.pc(t.data.title),a.yb(2),a.rc("",a.Zb(8,15,t.data.created)," tarihinde ",null==t.data.createdBy?null:t.data.createdBy.displayName," taraf\u0131ndan eklendi"),a.yb(3),a.ec("alt",t.data.name),a.yb(4),a.pc(t.data.description),a.yb(4),a.pc(t.data.name),a.yb(3),a.rc("",null==t.data.fromWhere?null:t.data.fromWhere.text,", ",null==t.data.city?null:t.data.city.text,""),a.yb(2),a.rc("",null==t.data.gender?null:t.data.gender.text," ",null==t.data.race?null:t.data.race.name,""),a.yb(2),a.rc("",null==t.data.age?null:t.data.age.text," ve ",null==t.data.size?null:t.data.size.text,""),a.yb(1),a.dc("ngIf",t.data.isEditable),a.yb(12),a.dc("disabled",t.deleting),a.yb(2),a.dc("ngIf",t.deleting))},directives:[o.k,f,c.d],pipes:[o.d],encapsulation:2}),e})();var y=i("SxV6");function N(e,t){if(1&e&&(a.Ob(0,"h1"),a.oc(1),a.Nb()),2&e){const e=a.Xb();a.yb(1),a.qc("",e.pageTitle," Ekle")}}function O(e,t){if(1&e&&(a.Ob(0,"h1"),a.oc(1),a.Nb()),2&e){const e=a.Xb();a.yb(1),a.qc("",e.pageTitle," G\xfcncelle")}}function I(e,t){1&e&&(a.Ob(0,"div"),a.oc(1,"\u0130sim zorunlu"),a.Nb())}function k(e,t){if(1&e&&(a.Ob(0,"div",21),a.nc(1,I,2,0,"div",0),a.Nb()),2&e){const e=a.Xb();a.yb(1),a.dc("ngIf",e.f.name.errors.required)}}function C(e,t){if(1&e&&(a.Ob(0,"option",22),a.oc(1),a.Nb()),2&e){const e=t.$implicit,i=a.Xb();a.dc("value",e.value)("selected",e.value==i.f.cityId),a.yb(1),a.pc(e.text)}}function w(e,t){1&e&&(a.Ob(0,"div"),a.oc(1,"\u015eehir zorunlu"),a.Nb())}function S(e,t){if(1&e&&(a.Ob(0,"div",21),a.nc(1,w,2,0,"div",0),a.Nb()),2&e){const e=a.Xb();a.yb(1),a.dc("ngIf",e.f.name.errors.required)}}function V(e,t){if(1&e&&(a.Ob(0,"option",22),a.oc(1),a.Nb()),2&e){const e=t.$implicit,i=a.Xb();a.dc("value",e.id)("selected",e.id==i.f.raceId),a.yb(1),a.pc(e.name)}}function x(e,t){1&e&&a.Kb(0,"div",21)}function j(e,t){if(1&e&&(a.Ob(0,"option",22),a.oc(1),a.Nb()),2&e){const e=t.$implicit,i=a.Xb();a.dc("value",e.value)("selected",e.value==i.f.genderValue),a.yb(1),a.pc(e.text)}}function z(e,t){1&e&&a.Kb(0,"div",21)}function K(e,t){if(1&e&&(a.Ob(0,"option",22),a.oc(1),a.Nb()),2&e){const e=t.$implicit,i=a.Xb();a.dc("value",e.value)("selected",e.value==i.f.ageValue),a.yb(1),a.pc(e.text)}}function P(e,t){1&e&&a.Kb(0,"div",21)}function T(e,t){if(1&e&&(a.Ob(0,"option",22),a.oc(1),a.Nb()),2&e){const e=t.$implicit,i=a.Xb();a.dc("value",e.value)("selected",e.value==i.f.sizeValue),a.yb(1),a.pc(e.text)}}function A(e,t){1&e&&a.Kb(0,"div",21)}function X(e,t){if(1&e&&(a.Ob(0,"option",22),a.oc(1),a.Nb()),2&e){const e=t.$implicit,i=a.Xb();a.dc("value",e.value)("selected",e.value==i.f.fromWhereValue),a.yb(1),a.pc(e.text)}}function J(e,t){1&e&&a.Kb(0,"div",21)}function D(e,t){1&e&&(a.Ob(0,"div"),a.oc(1,"Ba\u015fl\u0131k zorunlu"),a.Nb())}function E(e,t){if(1&e&&(a.Ob(0,"div",21),a.nc(1,D,2,0,"div",0),a.Nb()),2&e){const e=a.Xb();a.yb(1),a.dc("ngIf",e.f.title.errors.required)}}function M(e,t){1&e&&a.Kb(0,"div",21)}function W(e,t){1&e&&a.Kb(0,"span",23)}const F=function(e){return{"is-invalid":e}};let B=(()=>{class e{constructor(e,t,i,n,o){this.formBuilder=e,this.route=t,this.router=i,this.alertService=n,this.client=o,this.loading=!1,this.submitted=!1,this.data=[]}ngOnInit(){this.route.params.subscribe(e=>{this.petId=e.id,this.petType=e.type,this.fillInTheBlanks()})}fillInTheBlanks(){this.isAddMode=!this.petId,this.form=this.formBuilder.group({name:["",n.l.required],title:["",n.l.required],description:[""],cityId:["",n.l.required],raceId:[""],ageValue:["None"],genderValue:["None"],sizeValue:["None"],fromWhereValue:["None"],petTypeValue:[this.petType]}),this.client.getCities().subscribe(e=>{this.data.cities=e}),this.client.getAges().subscribe(e=>{this.data.ages=e}),this.client.getGenders().subscribe(e=>{this.data.genders=e}),this.client.getSizes().subscribe(e=>{this.data.sizes=e}),this.client.getFromWhere().subscribe(e=>{this.data.fromWhere=e}),this.isAddMode?(this.client.getPetTypes().subscribe(e=>{this.pageTitle=e.find(e=>e.value.toLowerCase()==this.petType).text}),this.client.getRacesForPetType(this.petType).subscribe(e=>{this.data.races=e})):this.client.getPet(this.petId).pipe(Object(y.a)()).subscribe(e=>{this.form.patchValue(e),this.form.patchValue({cityId:e.city.value,raceId:e.race.id,genderValue:e.gender.value,ageValue:e.age.value,sizeValue:e.size.value,fromWhereValue:e.fromWhere.value}),this.pageTitle=e.petType.text,this.client.getRacesForPetType(e.petType.value).subscribe(e=>{this.data.races=e})})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createAccount():this.updateAccount())}createAccount(){this.client.createPet(this.form.value).pipe(Object(y.a)()).subscribe({next:e=>{this.alertService.success("Pet ba\u015far\u0131yla eklendi.",{keepAfterRouteChange:!0}),this.router.navigate(["/pet/"+e.id],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}})}updateAccount(){this.client.updatePet(this.petId,this.form.value).pipe(Object(y.a)()).subscribe({next:()=>{this.alertService.success("G\xfcncelleme ba\u015far\u0131l\u0131.",{keepAfterRouteChange:!0}),this.router.navigate(["/pet/"+this.petId],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}})}}return e.\u0275fac=function(t){return new(t||e)(a.Jb(n.c),a.Jb(c.a),a.Jb(c.c),a.Jb(b.b),a.Jb(d.f))},e.\u0275cmp=a.Db({type:e,selectors:[["ng-component"]],decls:69,vars:47,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","cityId",1,"form-control",3,"ngClass"],["value",""],[3,"value","selected",4,"ngFor","ngForOf"],["formControlName","raceId",1,"form-control",3,"ngClass"],["formControlName","genderValue",1,"form-control",3,"ngClass"],["formControlName","ageValue",1,"form-control",3,"ngClass"],["formControlName","sizeValue",1,"form-control",3,"ngClass"],["formControlName","fromWhereValue",1,"form-control",3,"ngClass"],["type","text","formControlName","title",1,"form-control",3,"ngClass"],[1,"form-group","col-7"],["type","text","formControlName","description",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/",1,"btn","btn-link"],[1,"invalid-feedback"],[3,"value","selected"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(a.nc(0,N,2,1,"h1",0),a.nc(1,O,2,1,"h1",0),a.Ob(2,"form",1),a.Vb("ngSubmit",function(){return t.onSubmit()}),a.Ob(3,"div",2),a.Ob(4,"div",3),a.Ob(5,"label"),a.oc(6,"\u0130smi *"),a.Nb(),a.Kb(7,"input",4),a.nc(8,k,2,1,"div",5),a.Nb(),a.Nb(),a.Ob(9,"div",2),a.Ob(10,"div",3),a.Ob(11,"label"),a.oc(12,"\u015eehir *"),a.Nb(),a.Ob(13,"select",6),a.Ob(14,"option",7),a.oc(15,"-"),a.Nb(),a.nc(16,C,2,3,"option",8),a.Nb(),a.nc(17,S,2,1,"div",5),a.Nb(),a.Ob(18,"div",3),a.Ob(19,"label"),a.oc(20,"Irk\u0131"),a.Nb(),a.Ob(21,"select",9),a.Ob(22,"option",7),a.oc(23,"-"),a.Nb(),a.nc(24,V,2,3,"option",8),a.Nb(),a.nc(25,x,1,0,"div",5),a.Nb(),a.Nb(),a.Ob(26,"div",2),a.Ob(27,"div",3),a.Ob(28,"label"),a.oc(29,"Cinsiyeti"),a.Nb(),a.Ob(30,"select",10),a.nc(31,j,2,3,"option",8),a.Nb(),a.nc(32,z,1,0,"div",5),a.Nb(),a.Ob(33,"div",3),a.Ob(34,"label"),a.oc(35,"Ya\u015f\u0131"),a.Nb(),a.Ob(36,"select",11),a.nc(37,K,2,3,"option",8),a.Nb(),a.nc(38,P,1,0,"div",5),a.Nb(),a.Nb(),a.Ob(39,"div",2),a.Ob(40,"div",3),a.Ob(41,"label"),a.oc(42,"Boyutu"),a.Nb(),a.Ob(43,"select",12),a.nc(44,T,2,3,"option",8),a.Nb(),a.nc(45,A,1,0,"div",5),a.Nb(),a.Ob(46,"div",3),a.Ob(47,"label"),a.oc(48,"Kimden"),a.Nb(),a.Ob(49,"select",13),a.nc(50,X,2,3,"option",8),a.Nb(),a.nc(51,J,1,0,"div",5),a.Nb(),a.Nb(),a.Ob(52,"div",2),a.Ob(53,"div",3),a.Ob(54,"label"),a.oc(55,"Ba\u015fl\u0131k *"),a.Nb(),a.Kb(56,"input",14),a.nc(57,E,2,1,"div",5),a.Nb(),a.Ob(58,"div",15),a.Ob(59,"label"),a.oc(60,"A\xe7\u0131klama"),a.Nb(),a.Kb(61,"input",16),a.nc(62,M,1,0,"div",5),a.Nb(),a.Nb(),a.Ob(63,"div",17),a.Ob(64,"button",18),a.nc(65,W,1,0,"span",19),a.oc(66," Kaydet "),a.Nb(),a.Ob(67,"a",20),a.oc(68,"\u0130ptal"),a.Nb(),a.Nb(),a.Nb()),2&e&&(a.dc("ngIf",t.isAddMode),a.yb(1),a.dc("ngIf",!t.isAddMode),a.yb(1),a.dc("formGroup",t.form),a.yb(5),a.dc("ngClass",a.hc(29,F,t.submitted&&t.f.name.errors)),a.yb(1),a.dc("ngIf",t.submitted&&t.f.name.errors),a.yb(5),a.dc("ngClass",a.hc(31,F,t.submitted&&t.f.cityId.errors)),a.yb(3),a.dc("ngForOf",t.data.cities),a.yb(1),a.dc("ngIf",t.submitted&&t.f.cityId.errors),a.yb(4),a.dc("ngClass",a.hc(33,F,t.submitted&&t.f.raceId.errors)),a.yb(3),a.dc("ngForOf",t.data.races),a.yb(1),a.dc("ngIf",t.submitted&&t.f.raceId.errors),a.yb(5),a.dc("ngClass",a.hc(35,F,t.submitted&&t.f.genderValue.errors)),a.yb(1),a.dc("ngForOf",t.data.genders),a.yb(1),a.dc("ngIf",t.submitted&&t.f.genderValue.errors),a.yb(4),a.dc("ngClass",a.hc(37,F,t.submitted&&t.f.ageValue.errors)),a.yb(1),a.dc("ngForOf",t.data.ages),a.yb(1),a.dc("ngIf",t.submitted&&t.f.ageValue.errors),a.yb(5),a.dc("ngClass",a.hc(39,F,t.submitted&&t.f.sizeValue.errors)),a.yb(1),a.dc("ngForOf",t.data.sizes),a.yb(1),a.dc("ngIf",t.submitted&&t.f.sizeValue.errors),a.yb(4),a.dc("ngClass",a.hc(41,F,t.submitted&&t.f.fromWhereValue.errors)),a.yb(1),a.dc("ngForOf",t.data.fromWhere),a.yb(1),a.dc("ngIf",t.submitted&&t.f.fromWhereValue.errors),a.yb(5),a.dc("ngClass",a.hc(43,F,t.submitted&&t.f.title.errors)),a.yb(1),a.dc("ngIf",t.submitted&&t.f.title.errors),a.yb(4),a.dc("ngClass",a.hc(45,F,t.submitted&&t.f.description.errors)),a.yb(1),a.dc("ngIf",t.submitted&&t.f.description.errors),a.yb(2),a.dc("disabled",t.loading),a.yb(1),a.dc("ngIf",t.loading))},directives:[o.k,n.m,n.h,n.e,n.b,n.g,n.d,o.i,n.k,n.i,n.n,o.j,c.f],encapsulation:2}),e})();var L=i("XgRA");const R=[{path:"",component:r,children:[{path:":id",component:v},{path:"add/:type",component:B,canActivate:[L.a]},{path:"edit/:id",component:B,canActivate:[L.a]}]}];let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Hb({type:e}),e.\u0275inj=a.Gb({imports:[[c.g.forChild(R)],c.g]}),e})(),G=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Hb({type:e}),e.\u0275inj=a.Gb({imports:[[o.b,n.j,q,l.a]]}),e})()}}]);