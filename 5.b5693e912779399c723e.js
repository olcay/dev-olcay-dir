(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{l0No:function(r,e,t){"use strict";t.r(e),t.d(e,"AccountsModule",function(){return D});var i=t("3Pt+"),s=t("ofXK"),n=t("tyNb"),c=t("SxV6"),o=t("fXoL"),b=t("J9tS");function a(r,e){1&r&&o.Lb(0,"span",10)}function d(r,e){1&r&&(o.Pb(0,"span"),o.rc(1,"Delete"),o.Ob())}function f(r,e){if(1&r){const r=o.Qb();o.Pb(0,"tr"),o.Pb(1,"td"),o.rc(2),o.Ob(),o.Pb(3,"td"),o.rc(4),o.Ob(),o.Pb(5,"td"),o.rc(6),o.Ob(),o.Pb(7,"td",6),o.Pb(8,"a",7),o.rc(9,"Edit"),o.Ob(),o.Pb(10,"button",8),o.Wb("click",function(){o.mc(r);const t=e.$implicit;return o.Yb().deleteAccount(t.id)}),o.qc(11,a,1,0,"span",9),o.qc(12,d,2,0,"span",5),o.Ob(),o.Ob(),o.Ob()}if(2&r){const r=e.$implicit;o.yb(2),o.uc("",r.firstName," ",r.lastName,""),o.yb(2),o.sc(r.email),o.yb(2),o.sc(r.role),o.yb(2),o.hc("routerLink","edit/",r.id,""),o.yb(2),o.fc("disabled",r.isDeleting),o.yb(1),o.fc("ngIf",r.isDeleting),o.yb(1),o.fc("ngIf",!r.isDeleting)}}function u(r,e){1&r&&(o.Pb(0,"tr"),o.Pb(1,"td",11),o.Lb(2,"span",12),o.Ob(),o.Ob())}let l=(()=>{class r{constructor(r){this.accountService=r}ngOnInit(){this.accountService.getAll().pipe(Object(c.a)()).subscribe(r=>this.accounts=r)}deleteAccount(r){this.accounts.find(e=>e.id===r).isDeleting=!0,this.accountService.delete(r).pipe(Object(c.a)()).subscribe(()=>{this.accounts=this.accounts.filter(e=>e.id!==r)})}}return r.\u0275fac=function(e){return new(e||r)(o.Kb(b.a))},r.\u0275cmp=o.Eb({type:r,selectors:[["ng-component"]],decls:19,vars:2,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-account",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(r,e){1&r&&(o.Pb(0,"h1"),o.rc(1,"Accounts"),o.Ob(),o.Pb(2,"p"),o.rc(3,"All accounts from secure (admin only) api end point:"),o.Ob(),o.Pb(4,"a",0),o.rc(5,"Create Account"),o.Ob(),o.Pb(6,"table",1),o.Pb(7,"thead"),o.Pb(8,"tr"),o.Pb(9,"th",2),o.rc(10,"Name"),o.Ob(),o.Pb(11,"th",2),o.rc(12,"Email"),o.Ob(),o.Pb(13,"th",2),o.rc(14,"Role"),o.Ob(),o.Lb(15,"th",3),o.Ob(),o.Ob(),o.Pb(16,"tbody"),o.qc(17,f,13,8,"tr",4),o.qc(18,u,3,0,"tr",5),o.Ob(),o.Ob()),2&r&&(o.yb(17),o.fc("ngForOf",e.accounts),o.yb(1),o.fc("ngIf",!e.accounts))},directives:[n.f,s.k,s.l],encapsulation:2}),r})();var m=t("XgRA");function p(r,e){1&r&&(o.Pb(0,"h1"),o.rc(1,"Create Account"),o.Ob())}function h(r,e){1&r&&(o.Pb(0,"h1"),o.rc(1,"Edit Account"),o.Ob())}function g(r,e){1&r&&(o.Pb(0,"div"),o.rc(1,"First Name is required"),o.Ob())}function v(r,e){if(1&r&&(o.Pb(0,"div",19),o.qc(1,g,2,0,"div",0),o.Ob()),2&r){const r=o.Yb();o.yb(1),o.fc("ngIf",r.f.firstName.errors.required)}}function P(r,e){1&r&&(o.Pb(0,"div"),o.rc(1,"Last Name is required"),o.Ob())}function O(r,e){if(1&r&&(o.Pb(0,"div",19),o.qc(1,P,2,0,"div",0),o.Ob()),2&r){const r=o.Yb();o.yb(1),o.fc("ngIf",r.f.lastName.errors.required)}}function y(r,e){1&r&&(o.Pb(0,"div"),o.rc(1,"Email is required"),o.Ob())}function q(r,e){1&r&&(o.Pb(0,"div"),o.rc(1,"Email must be a valid email address"),o.Ob())}function w(r,e){if(1&r&&(o.Pb(0,"div",19),o.qc(1,y,2,0,"div",0),o.qc(2,q,2,0,"div",0),o.Ob()),2&r){const r=o.Yb();o.yb(1),o.fc("ngIf",r.f.email.errors.required),o.yb(1),o.fc("ngIf",r.f.email.errors.email)}}function I(r,e){1&r&&(o.Pb(0,"div"),o.rc(1,"Role is required"),o.Ob())}function C(r,e){if(1&r&&(o.Pb(0,"div",19),o.qc(1,I,2,0,"div",0),o.Ob()),2&r){const r=o.Yb();o.yb(1),o.fc("ngIf",r.f.role.errors.required)}}function A(r,e){1&r&&(o.Pb(0,"div"),o.Pb(1,"h3",20),o.rc(2,"Change Password"),o.Ob(),o.Pb(3,"p"),o.rc(4,"Leave blank to keep the same password"),o.Ob(),o.Ob())}function N(r,e){1&r&&(o.Pb(0,"div"),o.rc(1,"Password is required"),o.Ob())}function S(r,e){1&r&&(o.Pb(0,"div"),o.rc(1,"Password must be at least 6 characters"),o.Ob())}function L(r,e){if(1&r&&(o.Pb(0,"div",19),o.qc(1,N,2,0,"div",0),o.qc(2,S,2,0,"div",0),o.Ob()),2&r){const r=o.Yb();o.yb(1),o.fc("ngIf",r.f.password.errors.required),o.yb(1),o.fc("ngIf",r.f.password.errors.minlength)}}function k(r,e){1&r&&(o.Pb(0,"div"),o.rc(1,"Confirm Password is required"),o.Ob())}function j(r,e){1&r&&(o.Pb(0,"div"),o.rc(1,"Passwords must match"),o.Ob())}function M(r,e){if(1&r&&(o.Pb(0,"div",19),o.qc(1,k,2,0,"div",0),o.qc(2,j,2,0,"div",0),o.Ob()),2&r){const r=o.Yb();o.yb(1),o.fc("ngIf",r.f.confirmPassword.errors.required),o.yb(1),o.fc("ngIf",r.f.confirmPassword.errors.mustMatch)}}function E(r,e){1&r&&o.Lb(0,"span",21)}const x=function(r){return{"is-invalid":r}};let K=(()=>{class r{constructor(r,e,t,i,s){this.formBuilder=r,this.route=e,this.router=t,this.accountService=i,this.alertService=s,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({firstName:["",i.l.required],lastName:["",i.l.required],email:["",[i.l.required,i.l.email]],role:["",i.l.required],password:["",[i.l.minLength(6),this.isAddMode?i.l.required:i.l.nullValidator]],confirmPassword:[""]},{validator:Object(m.e)("password","confirmPassword")}),this.isAddMode||this.accountService.getById(this.id).pipe(Object(c.a)()).subscribe(r=>this.form.patchValue(r))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createAccount():this.updateAccount())}createAccount(){this.accountService.create(this.form.value).pipe(Object(c.a)()).subscribe({next:()=>{this.alertService.success("Account created successfully",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:r=>{this.alertService.error(r),this.loading=!1}})}updateAccount(){this.accountService.update(this.id,this.form.value).pipe(Object(c.a)()).subscribe({next:()=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route})},error:r=>{this.alertService.error(r),this.loading=!1}})}}return r.\u0275fac=function(e){return new(e||r)(o.Kb(i.c),o.Kb(n.a),o.Kb(n.c),o.Kb(b.a),o.Kb(b.b))},r.\u0275cmp=o.Eb({type:r,selectors:[["ng-component"]],decls:48,vars:30,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"form-group","col-7"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["formControlName","role",1,"form-control",3,"ngClass"],["value",""],["value","User"],["value","Admin"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/admin/accounts",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"pt-3"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(r,e){1&r&&(o.qc(0,p,2,0,"h1",0),o.qc(1,h,2,0,"h1",0),o.Pb(2,"form",1),o.Wb("ngSubmit",function(){return e.onSubmit()}),o.Pb(3,"div",2),o.Pb(4,"div",3),o.Pb(5,"label"),o.rc(6,"First Name"),o.Ob(),o.Lb(7,"input",4),o.qc(8,v,2,1,"div",5),o.Ob(),o.Pb(9,"div",3),o.Pb(10,"label"),o.rc(11,"Last Name"),o.Ob(),o.Lb(12,"input",6),o.qc(13,O,2,1,"div",5),o.Ob(),o.Ob(),o.Pb(14,"div",2),o.Pb(15,"div",7),o.Pb(16,"label"),o.rc(17,"Email"),o.Ob(),o.Lb(18,"input",8),o.qc(19,w,3,2,"div",5),o.Ob(),o.Pb(20,"div",3),o.Pb(21,"label"),o.rc(22,"Role"),o.Ob(),o.Pb(23,"select",9),o.Lb(24,"option",10),o.Pb(25,"option",11),o.rc(26,"User"),o.Ob(),o.Pb(27,"option",12),o.rc(28,"Admin"),o.Ob(),o.Ob(),o.qc(29,C,2,1,"div",5),o.Ob(),o.Ob(),o.qc(30,A,5,0,"div",0),o.Pb(31,"div",2),o.Pb(32,"div",3),o.Pb(33,"label"),o.rc(34,"Password"),o.Ob(),o.Lb(35,"input",13),o.qc(36,L,3,2,"div",5),o.Ob(),o.Pb(37,"div",3),o.Pb(38,"label"),o.rc(39,"Confirm Password"),o.Ob(),o.Lb(40,"input",14),o.qc(41,M,3,2,"div",5),o.Ob(),o.Ob(),o.Pb(42,"div",15),o.Pb(43,"button",16),o.qc(44,E,1,0,"span",17),o.rc(45," Save "),o.Ob(),o.Pb(46,"a",18),o.rc(47,"Cancel"),o.Ob(),o.Ob(),o.Ob()),2&r&&(o.fc("ngIf",e.isAddMode),o.yb(1),o.fc("ngIf",!e.isAddMode),o.yb(1),o.fc("formGroup",e.form),o.yb(5),o.fc("ngClass",o.jc(18,x,e.submitted&&e.f.firstName.errors)),o.yb(1),o.fc("ngIf",e.submitted&&e.f.firstName.errors),o.yb(4),o.fc("ngClass",o.jc(20,x,e.submitted&&e.f.lastName.errors)),o.yb(1),o.fc("ngIf",e.submitted&&e.f.lastName.errors),o.yb(5),o.fc("ngClass",o.jc(22,x,e.submitted&&e.f.email.errors)),o.yb(1),o.fc("ngIf",e.submitted&&e.f.email.errors),o.yb(4),o.fc("ngClass",o.jc(24,x,e.submitted&&e.f.role.errors)),o.yb(6),o.fc("ngIf",e.submitted&&e.f.role.errors),o.yb(1),o.fc("ngIf",!e.isAddMode),o.yb(5),o.fc("ngClass",o.jc(26,x,e.submitted&&e.f.password.errors)),o.yb(1),o.fc("ngIf",e.submitted&&e.f.password.errors),o.yb(4),o.fc("ngClass",o.jc(28,x,e.submitted&&e.f.confirmPassword.errors)),o.yb(1),o.fc("ngIf",e.submitted&&e.f.confirmPassword.errors),o.yb(2),o.fc("disabled",e.loading),o.yb(1),o.fc("ngIf",e.loading))},directives:[s.l,i.m,i.h,i.e,i.b,i.g,i.d,s.j,i.k,i.i,i.n,n.f],encapsulation:2}),r})();const Y=[{path:"",component:l},{path:"add",component:K},{path:"edit/:id",component:K}];let R=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.Ib({type:r}),r.\u0275inj=o.Hb({imports:[[n.g.forChild(Y)],n.g]}),r})(),D=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.Ib({type:r}),r.\u0275inj=o.Hb({imports:[[s.b,i.j,R]]}),r})()}}]);